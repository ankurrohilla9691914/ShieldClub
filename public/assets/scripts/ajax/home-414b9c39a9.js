{let e=function(e){$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$("#post-"+e.data.post_id).remove()},error:function(e){console.log(e.responseText)}})};$(".ajax-delete").click((function(t){t.preventDefault(),e(this)}));let t=function(e){$.ajax({type:"post",url:$(e).prop("action"),data:$(e).serialize(),success:function(t){let s=t.data.comment,a=n(s);s.user.avatar||$(a).find("img").attr("src","/uploads/users/default/avatar"),$(`#post-${e.postid.value} .all-comments`).append(a);let o=$("#post-"+e.postid.value).children(".response-box").children("div").children(".toggle-comment"),c=o.attr("data-comments");c++,o.attr("data-comments",""+c),o.html(`(${c})`);let d=$("#comment-"+s._id);d.find(".delete > a").click((function(e){e.preventDefault(),i(this)})),d.find(".toggle-like").click((function(e){e.preventDefault(),l($(this))})),d.find(".like-com").click((function(){"Like"==$(this).children("div").html()?$(this).children("div").html("Unlike"):$(this).children("div").html("Like")}))},error:function(e){console.log(e.responseText)}})},n=function(e){return $(`<div id='comment-${e._id}' class="comment">\n        <div class=" pl-3 pb-2 d-flex">\n            <div class="m-2">\n                    <img src="${e.user.avatar}" alt="Profile" width="30" height="30" style="border-radius: 100%;">\n            </div>\n            <div class="d-flex" style="width: 100%; justify-content: space-between;">\n                <div class="post-user-name pt-1 pl-2" style="width: 84%;">\n                    <div class="" style="font-weight: 500;">\n                        ${e.user.name}\n                        <span class="" style="font-size: 13px; color: grey;">Just Now</span>\n                    </div>\n                    <div style="display: inline-flex; width: 100%; justify-content: space-between;">\n                        <div style="display: flex;">\n                            ${e.comment}\n                            <a href="/like/toggle/?id=${e._id}&type=Comment" style="font-size: 15px;" class="toggle-like pl-3 like-com">\n                                <div>Like</div>\n                            </a>\n                        </div>\n                        <div class="pr-3 like-count">\n                            <div data-likes="${e.likes.length}">\n                                ${e.likes.length} Likes\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="delete">\n                    <a href="comment/delete/${e._id}" style="font-size: 15px;">Delete</a>\n                </div>\n            </div>\n        </div>`)};$(".post-comments").children("form").submit((function(e){e.preventDefault(),t(this),$($(this).children("input")[0]).prop("value","")}));let i=function(e){$.ajax({type:"get",url:$(e).prop("href"),success:function(e){let t=$($("#comment-"+e.data.comment_id)[0].parentElement.parentElement).children(".response-box").children("div").children(".toggle-comment"),n=t.attr("data-comments");n--,t.attr("data-comments",""+n),t.html(`(${n})`),$("#comment-"+e.data.comment_id).remove()},error:function(e){console.log(e.responseText)}})};$(".delete").children("a").click((function(e){e.preventDefault(),i(this)}));let l=function(e){$.ajax({type:"get",url:e.prop("href"),success:function(t){let n=$(e[0].parentElement.parentElement).children(".like-count").children("div"),i=n.attr("data-likes");t.data.deleted?i--:i++,n.attr("data-likes",""+i),n.html(i+" Likes")}})};$(".toggle-like").click((function(e){e.preventDefault(),l($(this))}))}