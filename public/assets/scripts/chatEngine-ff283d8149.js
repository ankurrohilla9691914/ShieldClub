class ChatEngine{constructor(e,s,n){this.chatBox=$("#"+e),this.userID=n,this.chatID=s,this.socket=io.connect("http://localhost:5000"),this.userID&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("Connection established..."),e.socket.emit("join-room",{userID:e.userID,chatID:e.chatID}),e.socket.on("user-joined",(function(e){if(!e.single){$("#online-status").css("background-color","rgb(0, 250, 33)"),$("#seen").remove();let e=$("#messages > li");e=e[e.length-1],"right"==$(e).css("text-align")&&$("#messages").append('<div id="seen">seen</div>')}}))})),$("#send-message > form").submit((function(s){s.preventDefault();let n=$("#send-message > form > input").val();""!=n&&e.socket.emit("send-message",{message:n,userID:e.userID,chatID:e.chatID}),$("#send-message > form > input").val("")})),e.socket.on("receive-message",(function(s){$("#seen").remove(),s.userID!=e.userID?$("#messages").append(`<li style="text-align: left;"><div style="background-color: orange; word-wrap: break-word; display: inline-block;">${s.message}</div></li>`):($("#messages").append(`<li style="text-align: right;"><div style="background-color: skyblue; word-wrap: break-word; display: inline-block;">${s.message}</div></li>`),s.single||$("#messages").append('<div id="seen">seen</div>')),$($("#messages")[0].parentElement).scrollTop($("#messages").height())})),e.socket.on("went-offline",(function(){$("#online-status").css("background-color","grey")}))}}